package edu.hw6;

import edu.hw6.task5.HackerNews;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;
import java.io.IOException;
import static org.assertj.core.api.Assertions.assertThat;
import static org.junit.jupiter.api.Assertions.assertEquals;

@SuppressWarnings("MagicNumber")
class Task5Test {
    @Test
    @DisplayName("Test find IDs")
    void findIDs() throws IOException, InterruptedException {
        // given and when
        long[] ids = HackerNews.hackerNewsTopStories();
        long[] expected = getExpectedArray();

        // then
        assertThat(ids.length).isEqualTo(expected.length);
    }

    @Test
    @DisplayName("Test find title")
    void findTitle() throws IOException, InterruptedException {
        // given
        String expected = "JDK 21 Release Notes";

        // when
        String title = HackerNews.newsTitle(37570037);

        // then
        assertThat(title).isEqualTo(expected);
    }

    private long[] getExpectedArray() {
        return new long[] {38274782, 38259148, 38271155, 38271702, 38271534, 38275791, 38272162, 38270714, 38262628,
            38270265, 38272132, 38259991, 38266773, 38274872, 38259100, 38273999, 38270552, 38266923, 38262425,
            38262251, 38266387, 38262900, 38264641, 38274568, 38275060, 38270446, 38272495, 38273608, 38261982,
            38270473, 38250459, 38271959, 38265773, 38270936, 38262211, 38257794, 38257094, 38263779, 38269144,
            38248758, 38274241, 38268958, 38267739, 38272234, 38261539, 38252566, 38272226, 38269453, 38272557,
            38272377, 38266340, 38265183, 38271795, 38264174, 38263786, 38261913, 38273528, 38262775, 38255808,
            38268737, 38247543, 38263118, 38270084, 38273624, 38268271, 38273948, 38256137, 38251957, 38248653,
            38268706, 38249649, 38262320, 38265714, 38262124, 38271758, 38259146, 38272129, 38249214, 38253263,
            38248532, 38262196, 38263294, 38248421, 38263435, 38249742, 38256810, 38248497, 38251935, 38249587,
            38274210, 38260069, 38274427, 38243949, 38247964, 38250913, 38263934, 38269460, 38268890, 38265857,
            38267084, 38255230, 38263869, 38256645, 38251842, 38254353, 38242946, 38257024, 38266912, 38257813,
            38255455, 38251330, 38266011, 38262315, 38245198, 38249473, 38269656, 38264196, 38266792, 38245542,
            38248422, 38250114, 38252947, 38256620, 38246226, 38267879, 38256577, 38248900, 38266216, 38260070,
            38263621, 38257284, 38249404, 38249730, 38269754, 38245935, 38254153, 38262949, 38254835, 38247767,
            38253384, 38248752, 38249616, 38269737, 38247561, 38271450, 38272993, 38264876, 38242992, 38248617,
            38240333, 38252963, 38274212, 38251154, 38269744, 38249664, 38265088, 38272738, 38263175, 38251032,
            38254656, 38258101, 38270649, 38248681, 38252449, 38250001, 38246413, 38269265, 38246032, 38254386,
            38261524, 38268256, 38255004, 38264269, 38246668, 38256392, 38269650, 38241235, 38264906, 38241674,
            38266867, 38253130, 38253425, 38255884, 38241304, 38270529, 38266907, 38244473, 38246082, 38270360,
            38270325, 38249069, 38247234, 38252597, 38241583, 38245762, 38248371, 38267740, 38247423, 38267526,
            38255496, 38271216, 38245240, 38263909, 38266569, 38244927, 38261415, 38256558, 38268803, 38271030,
            38249708, 38250101, 38261232, 38247339, 38249394, 38270904, 38264937, 38249130, 38255609, 38249527,
            38265884, 38268462, 38258880, 38272804, 38267787, 38266131, 38255157, 38254405, 38254265, 38253018,
            38264742, 38266144, 38258129, 38240861, 38257118, 38269297, 38270044, 38263386, 38252360, 38265665,
            38261797, 38260658, 38265390, 38265092, 38242105, 38272165, 38250372, 38268376, 38242343, 38267588,
            38266833, 38256516, 38263051, 38264118, 38242086, 38244947, 38250404, 38242160, 38254291, 38243060,
            38260815, 38247478, 38253315, 38260217, 38270323, 38253084, 38248292, 38250284, 38269475, 38249820,
            38253406, 38259204, 38252492, 38250479, 38240370, 38245100, 38255001, 38254866, 38267020, 38251028,
            38243806, 38255923, 38247788, 38260555, 38240689, 38258778, 38243341, 38258381, 38256166, 38255892,
            38250602, 38255404, 38243230, 38270817, 38247363, 38249938, 38267616, 38254786, 38269897, 38253414,
            38258015, 38254435, 38245187, 38269747, 38250382, 38240421, 38258671, 38245665, 38240494, 38240278,
            38252434, 38251500, 38255168, 38257860, 38255056, 38257816, 38250394, 38241237, 38249204, 38250731,
            38251382, 38253699, 38257310, 38257182, 38266934, 38256694, 38257049, 38247246, 38256509, 38240812,
            38252565, 38273223, 38249366, 38256206, 38240386, 38253434, 38258958, 38258718, 38242536, 38254719,
            38242233, 38248291, 38259727, 38262536, 38248005, 38251002, 38242758, 38240658, 38242518, 38249138,
            38250015, 38262182, 38247357, 38252233, 38257045, 38264580, 38256707, 38247305, 38251101, 38261187,
            38251841, 38242510, 38255834, 38255789, 38249316, 38240212, 38242445, 38249582, 38240221, 38248077,
            38244289, 38249367, 38254589, 38261914, 38244532, 38254080, 38253937, 38253749, 38268470, 38261666,
            38253521, 38253364, 38251864, 38243540, 38252815, 38251366, 38253825, 38264687, 38243702, 38249194,
            38249039, 38254040, 38242980, 38247300, 38240319, 38256951, 38257457, 38240363, 38243125, 38247383,
            38242586, 38241877, 38253582, 38251076, 38249755, 38258078, 38242244, 38242718, 38242664, 38253146,
            38254138, 38240821, 38246624, 38244149, 38272845, 38255079, 38254258, 38244320, 38257637, 38271775,
            38244703, 38268043, 38264778, 38248705, 38252741, 38240402, 38254502, 38252172, 38255692, 38246439,
            38240937, 38257141, 38243061, 38244769, 38243722, 38240691, 38263833, 38259436, 38246395, 38244612,
            38254086, 38269445, 38242420, 38257000, 38266042, 38252215, 38253715, 38260982, 38242109, 38254096,
            38252628, 38248809, 38270582, 38252625, 38251715, 38259638, 38269175, 38256746, 38246209, 38258842,
            38241974, 38249202, 38253787, 38258406, 38259220, 38250470, 38270745, 38270129, 38267891};
    }
}

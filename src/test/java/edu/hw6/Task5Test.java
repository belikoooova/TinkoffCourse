package edu.hw6;

import edu.hw6.task5.HackerNews;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;
import java.io.IOException;
import java.util.Arrays;
import static org.assertj.core.api.Assertions.assertThat;

@SuppressWarnings("MagicNumber")
class Task5Test {
    private static final int FIVE = 5;

    @Test
    @DisplayName("Test find IDs")
    void findIDs() throws IOException, InterruptedException {
        // given and when
        long[] ids = HackerNews.hackerNewsTopStories();
        long[] expected = getExpectedArray();

        // then
        assertThat(ids.length).isEqualTo(expected.length);
        for (int i = 0; i < FIVE; ++i) {
            assertThat(ids[i]).isEqualTo(expected[i]);
        }
    }

    @Test
    @DisplayName("Test find title")
    void findTitle() throws IOException, InterruptedException {
        // given
        String expected = "JDK 21 Release Notes";

        // when
        String title = HackerNews.newsTitle(37570037);

        // then
        assertThat(title).isEqualTo(expected);
    }

    private long[] getExpectedArray() {
        return new long[] {38263294, 38264641, 38265714, 38264174, 38250459, 38262315, 38266029, 38262320, 38261913,
            38263435, 38262775, 38262196, 38262124, 38263934, 38253263, 38266340, 38255808, 38247543, 38264937,
            38257794, 38264876, 38248653, 38257094, 38255455, 38263621, 38262949, 38261539, 38249730, 38263786,
            38252566, 38263833, 38249649, 38263118, 38256137, 38264269, 38264196, 38251957, 38259146, 38262251,
            38256810, 38264906, 38248497, 38264580, 38256645, 38249587, 38249214, 38257813, 38249742, 38248532,
            38257284, 38248421, 38254353, 38263386, 38255230, 38250913, 38251935, 38251842, 38247964, 38257024,
            38261524, 38256577, 38250114, 38251330, 38243949, 38261415, 38252947, 38248422, 38258101, 38261232,
            38248752, 38245542, 38242992, 38249473, 38254153, 38232767, 38254835, 38261797, 38249404, 38242946,
            38248900, 38253384, 38245198, 38246226, 38229998, 38260815, 38263869, 38249616, 38252963, 38254656,
            38245935, 38247767, 38255004, 38248681, 38254386, 38251154, 38252449, 38231160, 38236128, 38251032,
            38256392, 38228310, 38252597, 38248617, 38249664, 38250001, 38229231, 38255884, 38247561, 38230161,
            38253130, 38236198, 38256620, 38253425, 38258880, 38249708, 38237230, 38228320, 38260658, 38240333,
            38264687, 38256558, 38246413, 38255496, 38249069, 38246032, 38247234, 38238658, 38246668, 38232243,
            38258129, 38257118, 38230532, 38255157, 38241674, 38260555, 38241235, 38246082, 38249394, 38247423,
            38259204, 38250101, 38241304, 38226743, 38248371, 38245762, 38249527, 38249130, 38244473, 38226057,
            38264778, 38255609, 38247339, 38241583, 38226526, 38228788, 38245240, 38252360, 38226030, 38262182,
            38244927, 38239211, 38238796, 38254405, 38229398, 38254291, 38254265, 38256516, 38236684, 38237696,
            38230141, 38262536, 38238180, 38253315, 38258778, 38253084, 38253018, 38260217, 38248292, 38230476,
            38258381, 38239728, 38239503, 38255923, 38261666, 38231771, 38253406, 38252492, 38261914, 38226340,
            38240861, 38242343, 38249820, 38250404, 38250284, 38254866, 38227486, 38230325, 38226833, 38247478,
            38258671, 38250372, 38239358, 38233938, 38231670, 38226891, 38258015, 38238707, 38226799, 38242105,
            38244947, 38255001, 38256166, 38235407, 38242086, 38243060, 38231704, 38251028, 38228481, 38239585,
            38257860, 38255404, 38257816, 38228114, 38227324, 38248758, 38258958, 38227544, 38251500, 38259436,
            38257310, 38255892, 38234653, 38257182, 38258718, 38230453, 38261187, 38253414, 38249938, 38259727,
            38250602, 38230516, 38237442, 38257049, 38235745, 38245100, 38255056, 38256694, 38247788, 38242160,
            38256509, 38240370, 38250382, 38252434, 38256206, 38234387, 38228592, 38234383, 38243806, 38231901,
            38236607, 38250731, 38226589, 38227886, 38247363, 38235465, 38251382, 38240689, 38234319, 38236155,
            38245665, 38255168, 38234705, 38243341, 38253699, 38228074, 38253434, 38252565, 38249204, 38257045,
            38254719, 38243230, 38245187, 38235874, 38256707, 38231151, 38227437, 38230449, 38251002, 38249366,
            38225724, 38239266, 38226402, 38239286, 38240278, 38240421, 38255834, 38247246, 38234120, 38230730,
            38228122, 38240494, 38230316, 38226291, 38250394, 38239735, 38232998, 38241237, 38232378, 38250015,
            38239542, 38239252, 38248291, 38239422, 38240175, 38254786, 38234564, 38238301, 38232914, 38249138,
            38254589, 38251101, 38248005, 38253825, 38234580, 38254435, 38227428, 38251841, 38234325, 38254080,
            38240089, 38240812, 38227565, 38253937, 38227451, 38247305, 38253749, 38239629, 38263051, 38231390,
            38240386, 38253521, 38233568, 38253364, 38247357, 38242536, 38228672, 38249316, 38235102, 38226567,
            38228470, 38252815, 38239453, 38251864, 38249367, 38240147, 38233157, 38242233, 38229928, 38257457,
            38252233, 38242518, 38227112, 38229041, 38240658, 38248077, 38234305, 38256951, 38230495, 38233905,
            38237472, 38231601, 38251366, 38242758, 38254040, 38239640, 38228039, 38236512, 38244289, 38232006,
            38243702, 38237848, 38232920, 38236857, 38240212, 38230750, 38240221, 38249582, 38231320, 38251076,
            38239776, 38242445, 38258078, 38242510, 38229001, 38243540, 38249194, 38235124, 38226404, 38232397,
            38228709, 38236689, 38253582, 38231626, 38237180, 38233812, 38232930, 38228033, 38235615, 38228649,
            38230579, 38229576, 38230417, 38234326, 38226103, 38232334, 38225640, 38242980, 38235116, 38247383,
            38232438, 38247300, 38225424, 38244532, 38234057, 38240319, 38240363, 38257637, 38234230, 38249755,
            38253146, 38229843, 38243125, 38225520, 38227329, 38237733, 38255079, 38233820, 38242586, 38230904,
            38234716, 38225768, 38237366, 38227168, 38241877, 38234896, 38236209, 38254258, 38233902, 38233281,
            38230626, 38234689, 38238123, 38238674, 38237730, 38231656, 38229102, 38226199, 38226430, 38228861,
            38227711, 38254138, 38231781, 38236168, 38242244, 38246624, 38242718, 38242664, 38228007, 38238204,
            38248705, 38232572, 38227321, 38228556, 38230494, 38244149, 38226609, 38240821, 38233934, 38228514,
            38230120, 38239440, 38228265, 38230008, 38244320, 38252741, 38231564, 38239896, 38232234, 38254502,
            38227582, 38236519, 38235192, 38229716, 38255692, 38234367, 38237287, 38231641, 38252172, 38237241,
            38226815};
    }
}
